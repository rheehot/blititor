<!DOCTYPE html>
<html lang="en">
<head>
    {% include '../include/head.html' %}
</head>
<body class="has-background-white">
<nav class="navbar is-dark is-fixed-top" role="navigation" aria-label="main navigation">
    {% include '../include/menu.html' %}
</nav>
<div class="transparent-gradient-bg">
    <div class="header-bg tilt-clock"></div>
</div>
<section class="section">
    <div class="container is-wrap">
        {% if not galleryImageList or (galleryImageList | length) < 1 %}
        <article class="message">
            <div class="message-body">
                <p>아직 갤러리에 업로드된 사진이 없습니다.</p>
            </div>
        </article>
        {% endif %}
        {% for cate in galleryImageList %}
        <article class="message is-gallery" id="{{cate.id}}">
            <div class="message-header">
                <p class="">{{ cate.title | trim }}<span class="subtitle">{{ cate.sub_title | trim }}</span></p>
                {% if user and user.grant %}
                <div class="control">
                    <span class="button is-success image-append">사진 추가</span>
                </div>
                {% endif %}
            </div>
            {% for img in cate.images %}
            <div class="message-body">
                <figure class="image">
                    <img src="/upload/gallery/image/{{img.image_file}}">
                    <p class="image-desc">{{ img.title | trim }}</p>
                </figure>
                {#
                <!-- 업로드 이외의 기능은 관리자 모드에서 지원 -->
                <div class="gallery-list-control">
                    <div class="field is-grouped is-grouped-right">
                        <div class="control">
                            <a href="{{site.root}}{{route.gallery.root}}" class="button is-danger image-delete">삭제</a>
                        </div>
                    </div>
                </div>
                #}
            </div>
            {% endfor %}
        </article>
        {% endfor %}
    </div>

    {% if user and user.grant %}
    <div class="gallery-write-control">
        <div class="columns">
            <div class="column container is-wrap">
                <div class="field is-grouped is-grouped-right">
                    <div class="control">
                        <button type="button" class="button is-primary make-category">새 카테고리 만들기</button>
                    </div>
                </div>
                <form class="is-category-form" action="{{site.root}}{{route.gallery.root}}{{route.gallery.category}}" method="post">
                    <div class="field is-horizontal">
                        <div class="field-label is-normal">
                            <label class="label">카테고리 제목</label>
                        </div>
                        <div class="field-body">
                            <div class="field is-grouped">
                                <p class="control is-expanded">
                                    <input class="input" type="text" name="category" placeholder="제목">
                                    <input type="hidden" name="_csrf" value="{{_csrf}}">
                                </p>
                                <div class="control">
                                    <button type="submit" class="button is-info">등록</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% endif %}
</section>
<footer class="footer">
    {% include '../include/footer.html' %}
</footer>
{% include '../include/script.html' %}
<script src="/vendor/flowjs/flow.min.js"></script>
<script src="{{site.theme}}/common/gallery.js?v2"></script>
</body>
</html>
